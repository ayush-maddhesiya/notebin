import { B2Client } from "./client";

export interface EnvValues {
  [key: string]: string;
}

export class B2Env {
  private c: B2Client;
  private path: string;

  constructor(
    client: B2Client,
    entryPath: string,
    public readonly isRef: boolean = false
  ) {
    this.c = client;
    this.path = `${entryPath}/basics/config/env`;
  }

  /** Get all env values */
  async get(): Promise<EnvValues> {
    const values = await this.c.request("GET", this.path);
    return values || {};
  }

  /** Get all env values */
  async set(values: EnvValues): Promise<void> {
    return await this.c.request("PUT", this.path, values);
  }
}
